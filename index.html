<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload de Arquivos (Simples)</title>
    <link rel="style.css" href="https://unpkg.com/@phosphor-icons/web/src/regular/style.css" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Upload de Arquivos</h1>
        
        <form id="uploadForm">
            <div class="form-group">
                <label for="email">E-mail do destinatário</label>
                <input type="email" id="email" name="email" placeholder="Digite o e-mail do destinatário" required>
            </div>
            
            <div class="form-group">
                <label for="fileInput">Arquivo (máx. 5MB)</label>
                <input type="file" id="fileInput" name="file" required>
                <div id="fileInfo" class="file-info hidden"></div>
            </div>
            
            <button type="submit" id="submitBtn" class="btn btn-primary">
                <i class="ph ph-paper-plane-right"></i>
                Enviar Arquivo
            </button>
            
            <div id="errorMessage" class="message message-error hidden">
                <i class="ph ph-warning"></i>
                <span id="errorText"></span>
            </div>
            
            <div id="successMessage" class="message message-success hidden">
                <i class="ph ph-check-circle"></i>
                <span id="successText"></span>
            </div>
        </form>
    </div>
    
    <script src="https://unpkg.com/@smash-sdk/uploader/dist/SmashUploader.browser.js">
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const smashUploader = new SmashUploader({
    apiKey: "<eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImIyN2YyM2VhLTFiZjYtNDQzMy04MDY2LTk4YzU1N2Q4YWE4NS1ldSIsInVzZXJuYW1lIjoiYjUzNjAyODAtOWQyMi00ZTk0LTkwYmMtZThiM2ZkNTE1NGFiIiwicmVnaW9uIjoidXMtZWFzdC0xIiwiaXAiOiIxODEuMTkxLjE2OS4yNTUiLCJzY29wZSI6Ik5vbmUiLCJhY2NvdW50IjoiOTExOWYyYmYtMTc1MS00ZWVkLWE5OTktZTMyNzhmMTc4NGFmLWVhIiwiaWF0IjoxNzQ2MjUwMzQ1LCJleHAiOjQ5MDIwMTAzNDV9.ylmc0xmi1ESSJRIrPkKArlbQGot5lZYQcM4jf31uUSo>"
});
            
            const form = document.getElementById('uploadForm');
            const emailInput = document.getElementById('email');
            const fileInput = document.getElementById('fileInput');
            const fileInfo = document.getElementById('fileInfo');
            const submitBtn = document.getElementById('submitBtn');
            const errorMessage = document.getElementById('errorMessage');
            const errorText = document.getElementById('errorText');
            const successMessage = document.getElementById('successMessage');
            const successText = document.getElementById('successText');
            const uploadParams = {
    file: file,
    recipients: [email],
    onProgress: (progress) => {
        // Atualização da barra de progresso
    }
};

smashUploader.upload(uploadParams)
    .then(response => {
        // Tratamento de sucesso
    })
    .catch(error => {
        // Tratamento de erro
    });
            // Constants
            const MAX_FILE_SIZE = 5 * 1024 * 1024; // 5MB in bytes
            
            // Format file size
            function formatFileSize(bytes) {
                if (bytes < 1024) return bytes + ' B';
                else if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
                else return (bytes / 1048576).toFixed(1) + ' MB';
            }
            
            // Show error message
            function showError(message) {
                errorText.textContent = message;
                errorMessage.classList.remove('hidden');
                setTimeout(() => {
                    errorMessage.classList.add('hidden');
                }, 5000);
            }
            
            // Show success message
            function showSuccess(message) {
                successText.textContent = message;
                successMessage.classList.remove('hidden');
            }
            
            // Handle file selection
            fileInput.addEventListener('change', function() {
                if (this.files && this.files.length > 0) {
                    const file = this.files[0];
                    
                    // Check file size
                    if (file.size > MAX_FILE_SIZE) {
                        showError('O arquivo excede o limite de 5MB. Por favor, selecione um arquivo menor.');
                        fileInput.value = '';
                        fileInfo.classList.add('hidden');
                    } else {
                        // Display file info
                        fileInfo.textContent = `Arquivo selecionado: ${file.name} (${formatFileSize(file.size)})`;
                        fileInfo.classList.remove('hidden');
                    }
                } else {
                    fileInfo.classList.add('hidden');
                }
            });
            
            // Handle form submission
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const email = emailInput.value;
                const file = fileInput.files[0];
                
                // Validate file
                if (!file) {
                    showError('Por favor, selecione um arquivo para enviar.');
                    return;
                }
                
                if (file.size > MAX_FILE_SIZE) {
                    showError('O arquivo excede o limite de 5MB. Por favor, selecione um arquivo menor.');
                    return;
                }
                
                // Prepare UI for upload
                submitBtn.disabled = true;
                submitBtn.innerHTML = 'Enviando...';
                errorMessage.classList.add('hidden');
                successMessage.classList.add('hidden');
                
                // Simulate successful upload (for demonstration)
                setTimeout(() => {
                    showSuccess(`Arquivo enviado com sucesso para ${email}!`);
                    
                    // Reset form
                    form.reset();
                    fileInfo.classList.add('hidden');
                    submitBtn.innerHTML = '<i class="ph ph-paper-plane-right"></i>Enviar Arquivo';
                    submitBtn.disabled = false;
                }, 2000);
                
            });
        });
    </script>
</body>
</html>
